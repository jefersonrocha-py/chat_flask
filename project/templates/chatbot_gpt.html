{% extends "base.html" %}

{% block content %}
<h2>Chatbot GPT</h2>
<div id="chat-container">
    <div id="messages"></div>
    <form id="chat-form">
        <input type="text" id="user-input" placeholder="Digite sua mensagem..." required>
        <button type="submit">Enviar</button>
    </form>
</div>
<script>
document.getElementById("chat-form").addEventListener("submit", function (e) {
    e.preventDefault();
    const userInput = document.getElementById("user-input").value;
    fetch("/chatbot_gpt", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `user_input=${encodeURIComponent(userInput)}`
    })
    .then(response => response.json())
    .then(data => {
        const messagesDiv = document.getElementById("messages");
        messagesDiv.innerHTML += `<p><strong>Você:</strong> ${userInput}</p>`;
        messagesDiv.innerHTML += `<p><strong>GPT:</strong> ${data.response}</p>`;
        document.getElementById("user-input").value = "";
    });
});
</script>
<a href="{{ url_for('mode_selection') }}">Voltar à Seleção de Modo</a>
{% endblock %}